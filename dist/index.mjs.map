{"version":3,"file":"index.mjs","sources":["../src/indexes/Indexes.ts","../src/shared/generateTypos.ts","../src/shared/levenshteinDistance.ts","../src/search/Search.ts","../src/shared/generateCharArray.ts","../src/FirestoreSearchEngine.ts"],"sourcesContent":[null,null,null,null,null,null],"names":["Indexes","constructor","firestoreInstance","config","props","this","execute","typos","input","maxLength","length","Error","Set","segmentSizes","keyboardNeighbors","a","z","e","r","t","y","u","i","o","p","q","s","d","f","g","h","j","k","l","m","size","start","segment","slice","firstLetter","forEach","neighbor","typo","add","_a","lastLetter","_b","fse_generateTypos","inputField","wordMaxLength","saveWithLimitedKeywords","returnedFields","Array","from","keywords","bulk","bulkWriter","cleanOldIndexes","keywordChunks","push","create","collection","doc","search_keywords","flush","close","indexedDocumentPath","query","where","get","empty","docs","delete","ref","fse_levenshteinDistance","b","matrix","_","fill","cost","Math","min","Search","search","fieldValue","searchKeywords","startIndex","fragments","split","word","trim","substring","toLowerCase","fse_generateCharArray","querySnapshot","uniqueDocs","results","data","rest","uniqueId","some","keyword","has","FirestoreSearchEngine","settings","ignoreUndefinedProperties","indexes"],"mappings":"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"}